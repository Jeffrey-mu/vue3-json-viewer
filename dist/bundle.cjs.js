"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(require("clipboard"));function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var i=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,s={name:"JsonString",props:{jsonValue:{type:String,required:!0}},data:function(){return{expand:!0,canExtend:!1}},mounted:function(){this.$refs.itemRef.offsetHeight>this.$refs.holderRef.offsetHeight&&(this.canExtend=!0)},methods:{toggle:function(){this.expand=!this.expand}},render:function(){var t,n=this.jsonValue,o=i.test(n);return this.expand?(t={class:{"jv-item":!0,"jv-string":!0},ref:"itemRef"},o?(n='<a href="'.concat(n,'" target="_blank" class="jv-link">').concat(n,"</a>"),t.innerHTML='"'.concat(n.toString(),'"')):t.innerText='"'.concat(n.toString(),'"')):t={class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:"..."},e.h("span",{},[this.canExtend&&e.h("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle}),e.h("span",{class:{"jv-holder-node":!0},ref:"holderRef"}),e.h("span",t)])},__file:"src/Components/types/json-string.vue"},a={name:"JsonUndefined",functional:!0,props:{jsonValue:{type:Object,default:null}},render:function(){return e.h("span",{class:{"jv-item":!0,"jv-undefined":!0},innerText:null===this.jsonValue?"null":"undefined"})},__file:"src/Components/types/json-undefined.vue"},r={name:"JsonNumber",functional:!0,props:{jsonValue:{type:Number,required:!0}},render:function(){var t=Number.isInteger(this.jsonValue);return e.h("span",{class:{"jv-item":!0,"jv-number":!0,"jv-number-integer":t,"jv-number-float":!t},innerText:this.jsonValue.toString()})},__file:"src/Components/types/json-number.vue"},l={name:"JsonBoolean",functional:!0,props:{jsonValue:Boolean},render:function(){return e.h("span",{class:{"jv-item":!0,"jv-boolean":!0},innerText:this.jsonValue.toString()})},__file:"src/Components/types/json-boolean.vue"},p={name:"JsonObject",props:{jsonValue:{type:Object,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean,sort:Boolean,previewMode:Boolean},data:function(){return{value:{}}},computed:{ordered:function(){var e=this;if(!this.sort)return this.value;var t={};return Object.keys(this.value).sort().forEach((function(n){t[n]=e.value[n]})),t}},watch:{jsonValue:function(e){this.setValue(e)}},mounted:function(){this.setValue(this.jsonValue)},methods:{setValue:function(e){var t=this;setTimeout((function(){t.value=e}),0)},toggle:function(){this.$emit("update:expand",!this.expand),this.dispatchEvent()},dispatchEvent:function(){try{this.$el.dispatchEvent(new Event("resized"))}catch(t){var e=document.createEvent("Event");e.initEvent("resized",!0,!1),this.$el.dispatchEvent(e)}}},render:function(){var t=[];if(this.previewMode||this.keyName||t.push(e.h("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),t.push(e.h("span",{class:{"jv-item":!0,"jv-object":!0},innerText:"{"})),this.expand)for(var n in this.ordered)if(this.ordered.hasOwnProperty(n)){var o=this.ordered[n];t.push(e.h(h,{key:n,style:{display:this.expand?void 0:"none"},sort:this.sort,keyName:n,depth:this.depth+1,value:o,previewMode:this.previewMode}))}return!this.expand&&Object.keys(this.value).length&&t.push(e.h("span",{style:{display:this.expand?"none":void 0},class:{"jv-ellipsis":!0},onClick:this.toggle,title:"click to reveal object content (keys: ".concat(Object.keys(this.ordered).join(", "),")"),innerText:"..."})),t.push(e.h("span",{class:{"jv-item":!0,"jv-object":!0},innerText:"}"})),e.h("span",t)},__file:"src/Components/types/json-object.vue"},u={name:"JsonArray",props:{jsonValue:{type:Array,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},sort:Boolean,expand:Boolean,previewMode:Boolean},data:function(){return{value:[]}},watch:{jsonValue:function(e){this.setValue(e)}},mounted:function(){this.setValue(this.jsonValue)},methods:{setValue:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;0===n&&(this.value=[]),setTimeout((function(){e.length>n&&(t.value.push(e[n]),t.setValue(e,n+1))}),0)},toggle:function(){this.$emit("update:expand",!this.expand);try{this.$el.dispatchEvent(new Event("resized"))}catch(t){var e=document.createEvent("Event");e.initEvent("resized",!0,!1),this.$el.dispatchEvent(e)}}},render:function(){var t=this,n=[];return this.previewMode||this.keyName||n.push(e.h("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),n.push(e.h("span",{class:{"jv-item":!0,"jv-array":!0},innerText:"["})),this.expand&&this.value.forEach((function(o,i){n.push(e.h(h,{key:i,style:{display:t.expand?void 0:"none"},sort:t.sort,depth:t.depth+1,value:o,previewMode:t.previewMode}))})),!this.expand&&this.value.length&&n.push(e.h("span",{style:{display:void 0},class:{"jv-ellipsis":!0},onClick:this.toggle,title:"click to reveal ".concat(this.value.length," hidden items"),innerText:"..."})),n.push(e.h("span",{class:{"jv-item":!0,"jv-array":!0},innerText:"]"})),e.h("span",n)},__file:"src/Components/types/json-array.vue"},d={name:"JsonFunction",functional:!0,props:{jsonValue:{type:Function,required:!0}},render:function(){return e.h("span",{class:{"jv-item":!0,"jv-function":!0},attrs:{title:this.jsonValue.toString()},innerHTML:"&lt;function&gt;"})},__file:"src/Components/types/json-function.vue"},c={name:"JsonDate",inject:["timeformat"],functional:!0,props:{jsonValue:{type:Date,required:!0}},render:function(){var t=this.jsonValue,n=this.timeformat;return e.h("span",{class:{"jv-item":!0,"jv-string":!0},innerText:'"'.concat(n(t),'"')})},__file:"src/Components/types/json-date.vue"},h={name:"JsonBox",inject:["expandDepth"],props:{value:{type:[Object,Array,String,Number,Boolean,Function,Date],default:null},keyName:{type:String,default:""},sort:Boolean,depth:{type:Number,default:0},previewMode:Boolean},data:function(){return{expand:!0}},mounted:function(){this.expand=this.previewMode||!(this.depth>=this.expandDepth)},methods:{toggle:function(){this.expand=!this.expand;try{this.$el.dispatchEvent(new Event("resized"))}catch(t){var e=document.createEvent("Event");e.initEvent("resized",!0,!1),this.$el.dispatchEvent(e)}}},render:function(){var t,n=this,i=[];null===this.value||void 0===this.value?t=a:Array.isArray(this.value)?t=u:"[object Date]"===Object.prototype.toString.call(this.value)?t=c:"object"===o(this.value)?t=p:"number"==typeof this.value?t=r:"string"==typeof this.value?t=s:"boolean"==typeof this.value?t=l:"function"==typeof this.value&&(t=d);var h=this.keyName&&this.value&&(Array.isArray(this.value)||"object"===o(this.value)&&"[object Date]"!==Object.prototype.toString.call(this.value));return!this.previewMode&&h&&i.push(e.h("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),this.keyName&&i.push(e.h("span",{class:{"jv-key":!0},innerText:"".concat(this.keyName,":")})),i.push(e.h(t,{class:{"jv-push":!0},jsonValue:this.value,keyName:this.keyName,sort:this.sort,depth:this.depth,expand:this.expand,previewMode:this.previewMode,"onUpdate:expand":function(e){n.expand=e}})),e.h("div",{class:{"jv-node":!0,"jv-key-node":Boolean(this.keyName)&&!h,toggle:!this.previewMode&&h}},i)},__file:"src/Components/json-box.vue"},v={name:"JsonViewer",components:{JsonBox:h},props:{value:{type:[Object,Array,String,Number,Boolean,Function],required:!0},expanded:{type:Boolean,default:!1},expandDepth:{type:Number,default:1},copyable:{type:[Boolean,Object],default:!1},sort:{type:Boolean,default:!1},boxed:{type:Boolean,default:!1},theme:{type:String,default:"jv-light"},timeformat:{type:Function,default:function(e){return e.toLocaleString()}},previewMode:{type:Boolean,default:!1}},provide:function(){return{expandDepth:this.expandDepth,timeformat:this.timeformat}},data:function(){return{copied:!1,expandableCode:!1,expandCode:this.expanded}},computed:{jvClass:function(){return"jv-container "+this.theme+(this.boxed?" boxed":"")},copyText:function(){var e=this.copyable,t=e.copyText;return{copyText:t||"copy",copiedText:e.copiedText||"copied!",timeout:e.timeout||2e3,align:e.align}}},watch:{value:function(){this.onResized()}},mounted:function(){var e,t,o,i,s=this;(this.debounceResized=(e=this.debResized.bind(this),t=200,i=Date.now(),function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];Date.now()-i<t&&o&&clearTimeout(o),o=setTimeout((function(){e.apply(void 0,s)}),t),i=Date.now()}),this.boxed&&this.$refs.jsonBox&&(this.onResized(),this.$refs.jsonBox.$el.addEventListener("resized",this.onResized,!0)),this.copyable)&&new n.default(this.$refs.clip,{text:function(){return JSON.stringify(s.value,null,2)}}).on("success",(function(e){s.onCopied(e)}))},methods:{onResized:function(){this.debounceResized()},debResized:function(){var e=this;this.$nextTick((function(){e.$refs.jsonBox&&(e.$refs.jsonBox.$el.clientHeight>=250?e.expandableCode=!0:e.expandableCode=!1)}))},onCopied:function(e){var t=this;this.copied||(this.copied=!0,setTimeout((function(){t.copied=!1}),this.copyText.timeout),this.$emit("copied",e))},toggleExpandCode:function(){this.expandCode=!this.expandCode}}};v.render=function(t,n,o,i,s,a){var r=e.resolveComponent("json-box");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(a.jvClass)},[o.copyable?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass("jv-tooltip ".concat(a.copyText.align||"right"))},[e.createElementVNode("span",{ref:"clip",class:e.normalizeClass(["jv-button",{copied:s.copied}])},[e.renderSlot(t.$slots,"copy",{copied:s.copied},(function(){return[e.createTextVNode(e.toDisplayString(s.copied?a.copyText.copiedText:a.copyText.copyText),1)]}))],2)],2)):e.createCommentVNode("v-if",!0),e.createElementVNode("div",{class:e.normalizeClass(["jv-code",{open:s.expandCode,boxed:o.boxed}])},[e.createVNode(r,{ref:"jsonBox",value:o.value,sort:o.sort,"preview-mode":o.previewMode},null,8,["value","sort","preview-mode"])],2),s.expandableCode&&o.boxed?(e.openBlock(),e.createElementBlock("div",{key:1,class:"jv-more",onClick:n[0]||(n[0]=function(){return a.toggleExpandCode&&a.toggleExpandCode.apply(a,arguments)})},[e.createElementVNode("span",{class:e.normalizeClass(["jv-toggle",{open:!!s.expandCode}])},null,2)])):e.createCommentVNode("v-if",!0)],2)},v.__file="src/Components/json-viewer.vue";var f={install:function(e){e.component(v.name,v)}};exports.JsonViewer=v,exports.default=f;
